import React, {useCallback} from "react";
import "./textfx.css";

export const Tilt3D: React.FC<{text: string; play?: boolean; className?: string}> = ({text, play=true, className}) => {
  const onMove = useCallback<React.MouseEventHandler<HTMLDivElement>>((e) => {
    const r = e.currentTarget.getBoundingClientRect();
    const dx = (e.clientX - (r.left + r.width/2))/4;
    const dy = (e.clientY - (r.top + r.height/2))/4;
    e.currentTarget.style.setProperty("--dx", dx.toFixed(2));
    e.currentTarget.style.setProperty("--dy", dy.toFixed(2));
  }, []);
  const onLeave = useCallback<React.MouseEventHandler<HTMLDivElement>>((e) => {
    e.currentTarget.style.setProperty("--dx", "0");
    e.currentTarget.style.setProperty("--dy", "0");
  }, []);
  return (
    <div className={`demo lg fx-tilt ${className ?? ""}`}
         onMouseMove={onMove}
         onMouseLeave={onLeave}
         data-play={play ? "1" : undefined}>
      <div className="txt">{text}</div>
    </div>
  );
};
